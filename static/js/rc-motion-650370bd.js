import{l as e,m as n,n as t,a as r,_ as o,d as a,c as i,e as u,b as c,o as s,g as f}from"./@babel-d88a2d80.js";import{c as v}from"./classnames-e2ff59cf.js";import{c as l,d,e as m,f as p,s as E,g as y}from"./rc-util-b6974ce8.js";import{r as h}from"./react-7f48a8c9.js";var k=["children"],b=h.createContext({});function L(n){var t=n.children,r=e(n,k);return h.createElement(b.Provider,{value:r},t)}var g=function(e){n(i,e);var a=t(i);function i(){return r(this,i),a.apply(this,arguments)}return o(i,[{key:"render",value:function(){return this.props.children}}]),i}(h.Component),A="none",C="appear",R="enter",w="leave",S="none",P="prepare",j="start",N="active",O="end",T="prepared";function M(e,n){var t={};return t[e.toLowerCase()]=n.toLowerCase(),t["Webkit".concat(e)]="webkit".concat(n),t["Moz".concat(e)]="moz".concat(n),t["ms".concat(e)]="MS".concat(n),t["O".concat(e)]="o".concat(n.toLowerCase()),t}var V,x,D,z=(V=l(),x="undefined"!=typeof window?window:{},D={animationend:M("Animation","AnimationEnd"),transitionend:M("Transition","TransitionEnd")},V&&("AnimationEvent"in x||delete D.animationend.animation,"TransitionEvent"in x||delete D.transitionend.transition),D),F={};if(l()){var I=document.createElement("div");F=I.style}var K={};function H(e){if(K[e])return K[e];var n=z[e];if(n)for(var t=Object.keys(n),r=t.length,o=0;o<r;o+=1){var a=t[o];if(Object.prototype.hasOwnProperty.call(n,a)&&a in F)return K[e]=n[a],K[e]}return""}var U=H("animationend"),W=H("transitionend"),_=!(!U||!W),q=U||"animationend",B=W||"transitionend";function G(e,n){return e?"object"===a(e)?e[n.replace(/-\w/g,(function(e){return e[1].toUpperCase()}))]:"".concat(e,"-").concat(n):null}const J=function(e){var n=h.useRef(),t=h.useRef(e);t.current=e;var r=h.useCallback((function(e){t.current(e)}),[]);function o(e){e&&(e.removeEventListener(B,r),e.removeEventListener(q,r))}return h.useEffect((function(){return function(){o(n.current)}}),[]),[function(e){n.current&&n.current!==e&&o(n.current),e&&e!==n.current&&(e.addEventListener(B,r),e.addEventListener(q,r),n.current=e)},o]};var Q=l()?h.useLayoutEffect:h.useEffect;var X=[P,j,N,O],Y=[P,T],Z=!1,$=!0;function ee(e){return e===N||e===O}const ne=function(e,n,t){var r=m(S),o=i(r,2),a=o[0],u=o[1],c=function(){var e=h.useRef(null);function n(){d.cancel(e.current)}return h.useEffect((function(){return function(){n()}}),[]),[function t(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;n();var a=d((function(){o<=1?r({isCanceled:function(){return a!==e.current}}):t(r,o-1)}));e.current=a},n]}(),s=i(c,2),f=s[0],v=s[1];var l=n?Y:X;return Q((function(){if(a!==S&&a!==O){var e=l.indexOf(a),n=l[e+1],r=t(a);r===Z?u(n,!0):n&&f((function(e){function t(){e.isCanceled()||u(n,!0)}!0===r?t():Promise.resolve(r).then(t)}))}}),[e,a]),h.useEffect((function(){return function(){v()}}),[]),[function(){u(P,!0)},a]};const te=function(e){var n=e;"object"===a(e)&&(n=e.transitionSupport);var t=h.forwardRef((function(e,t){var r=e.visible,o=void 0===r||r,a=e.removeOnLeave,s=void 0===a||a,f=e.forceRender,l=e.children,d=e.motionName,k=e.leavedClassName,L=e.eventProps,S=function(e,t){return!(!e.motionName||!n||!1===t)}(e,h.useContext(b).motion),O=h.useRef(),M=h.useRef();var V=function(e,n,t,r){var o=r.motionEnter,a=void 0===o||o,s=r.motionAppear,f=void 0===s||s,v=r.motionLeave,l=void 0===v||v,d=r.motionDeadline,p=r.motionLeaveImmediately,E=r.onAppearPrepare,y=r.onEnterPrepare,k=r.onLeavePrepare,b=r.onAppearStart,L=r.onEnterStart,g=r.onLeaveStart,S=r.onAppearActive,O=r.onEnterActive,M=r.onLeaveActive,V=r.onAppearEnd,x=r.onEnterEnd,D=r.onLeaveEnd,z=r.onVisibleChanged,F=m(),I=i(F,2),K=I[0],H=I[1],U=m(A),W=i(U,2),_=W[0],q=W[1],B=m(null),G=i(B,2),X=G[0],Y=G[1],te=h.useRef(!1),re=h.useRef(null);function oe(){return t()}var ae=h.useRef(!1);function ie(){q(A,!0),Y(null,!0)}function ue(e){var n=oe();if(!e||e.deadline||e.target===n){var t,r=ae.current;_===C&&r?t=null==V?void 0:V(n,e):_===R&&r?t=null==x?void 0:x(n,e):_===w&&r&&(t=null==D?void 0:D(n,e)),_!==A&&r&&!1!==t&&ie()}}var ce=J(ue),se=i(ce,1)[0],fe=function(e){var n,t,r;switch(e){case C:return c(n={},P,E),c(n,j,b),c(n,N,S),n;case R:return c(t={},P,y),c(t,j,L),c(t,N,O),t;case w:return c(r={},P,k),c(r,j,g),c(r,N,M),r;default:return{}}},ve=h.useMemo((function(){return fe(_)}),[_]),le=ne(_,!e,(function(e){if(e===P){var n=ve[P];return n?n(oe()):Z}var t;return pe in ve&&Y((null===(t=ve[pe])||void 0===t?void 0:t.call(ve,oe(),null))||null),pe===N&&(se(oe()),d>0&&(clearTimeout(re.current),re.current=setTimeout((function(){ue({deadline:!0})}),d))),pe===T&&ie(),$})),de=i(le,2),me=de[0],pe=de[1],Ee=ee(pe);ae.current=Ee,Q((function(){H(n);var t,r=te.current;te.current=!0,!r&&n&&f&&(t=C),r&&n&&a&&(t=R),(r&&!n&&l||!r&&p&&!n&&l)&&(t=w);var o=fe(t);t&&(e||o[P])?(q(t),me()):q(A)}),[n]),h.useEffect((function(){(_===C&&!f||_===R&&!a||_===w&&!l)&&q(A)}),[f,a,l]),h.useEffect((function(){return function(){te.current=!1,clearTimeout(re.current)}}),[]);var ye=h.useRef(!1);h.useEffect((function(){K&&(ye.current=!0),void 0!==K&&_===A&&((ye.current||K)&&(null==z||z(K)),ye.current=!0)}),[K,_]);var he=X;return ve[P]&&pe===j&&(he=u({transition:"none"},he)),[_,pe,he,null!=K?K:n]}(S,o,(function(){try{return O.current instanceof HTMLElement?O.current:y(M.current)}catch(e){return null}}),e),x=i(V,4),D=x[0],z=x[1],F=x[2],I=x[3],K=h.useRef(I);I&&(K.current=!0);var H,U=h.useCallback((function(e){O.current=e,p(t,e)}),[t]),W=u(u({},L),{},{visible:o});if(l)if(D===A)H=I?l(u({},W),U):!s&&K.current&&k?l(u(u({},W),{},{className:k}),U):f||!s&&!k?l(u(u({},W),{},{style:{display:"none"}}),U):null;else{var _,q;z===P?q="prepare":ee(z)?q="active":z===j&&(q="start");var B=G(d,"".concat(D,"-").concat(q));H=l(u(u({},W),{},{className:v(G(d,D),(_={},c(_,B,B&&q),c(_,d,"string"==typeof d),_)),style:F}),U)}else H=null;h.isValidElement(H)&&E(H)&&(H.ref||(H=h.cloneElement(H,{ref:U})));return h.createElement(g,{ref:M},H)}));return t.displayName="CSSMotion",t}(_);var re="add",oe="keep",ae="remove",ie="removed";function ue(e){var n;return n=e&&"object"===a(e)&&"key"in e?e:{key:e},u(u({},n),{},{key:String(n.key)})}function ce(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(ue)}var se=["component","children","onVisibleChanged","onAllRemoved"],fe=["status"],ve=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];!function(a){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te,v=function(a){n(l,a);var v=t(l);function l(){var e;r(this,l);for(var n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];return e=v.call.apply(v,[this].concat(t)),c(s(e),"state",{keyEntities:[]}),c(s(e),"removeKey",(function(n){var t=e.state.keyEntities.map((function(e){return e.key!==n?e:u(u({},e),{},{status:ie})}));return e.setState({keyEntities:t}),t.filter((function(e){return e.status!==ie})).length})),e}return o(l,[{key:"render",value:function(){var n=this,t=this.state.keyEntities,r=this.props,o=r.component,a=r.children,u=r.onVisibleChanged,c=r.onAllRemoved,s=e(r,se),v=o||h.Fragment,l={};return ve.forEach((function(e){l[e]=s[e],delete s[e]})),delete s.keys,h.createElement(v,s,t.map((function(t){var r=t.status,o=e(t,fe),s=r===re||r===oe;return h.createElement(i,f({},l,{key:o.key,visible:s,eventProps:o,onVisibleChanged:function(e){(null==u||u(e,{key:o.key}),e)||0===n.removeKey(o.key)&&c&&c()}}),a)})))}}],[{key:"getDerivedStateFromProps",value:function(e,n){var t=e.keys,r=n.keyEntities,o=ce(t),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=[],r=0,o=n.length,a=ce(e),i=ce(n);a.forEach((function(e){for(var n=!1,a=r;a<o;a+=1){var c=i[a];if(c.key===e.key){r<a&&(t=t.concat(i.slice(r,a).map((function(e){return u(u({},e),{},{status:re})}))),r=a),t.push(u(u({},c),{},{status:oe})),r+=1,n=!0;break}}n||t.push(u(u({},e),{},{status:ae}))})),r<o&&(t=t.concat(i.slice(r).map((function(e){return u(u({},e),{},{status:re})}))));var c={};return t.forEach((function(e){var n=e.key;c[n]=(c[n]||0)+1})),Object.keys(c).filter((function(e){return c[e]>1})).forEach((function(e){(t=t.filter((function(n){var t=n.key,r=n.status;return t!==e||r!==ae}))).forEach((function(n){n.key===e&&(n.status=oe)}))})),t}(r,o);return{keyEntities:a.filter((function(e){var n=r.find((function(n){var t=n.key;return e.key===t}));return!n||n.status!==ie||e.status!==ae}))}}}]),l}(h.Component);c(v,"defaultProps",{component:"div"})}(_);export{L as M};
